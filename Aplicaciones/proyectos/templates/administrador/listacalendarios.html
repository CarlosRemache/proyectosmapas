{% extends "plantillaadministrador.html" %}
{% load static %}
{% block contener %}

<style>
  body{
    background:#ffffff;
  }

  .box{
    width:92%;
    max-width:1100px;
    margin:30px auto;
    background:#06080D;
    color:#F3F4F6;
    padding:22px;
    border-radius:18px;
    margin-left:380px;
    border:1px solid #1F2937;
    box-shadow:0 12px 30px rgba(0,0,0,0.4);
  }

  .box h3{
    color:#F3F4F6;
    margin-bottom:18px;
  }

  .table-responsive{
    width:100%;
    border-radius:14px;
    border:1px solid #1F2937;
    background:#111827;
    padding:12px;
    overflow:hidden;
  }

  .dt-buttons{
    text-align:right;
    margin-bottom:12px;
  }

  .dt-buttons .dt-button{
    padding:10px 14px;
    border-radius:10px;
    border:1px solid #1F2937;
    background:#3B82F6;
    color:#ffffff;
    font-weight:700;
    margin-left:8px;
  }

  .dt-buttons .dt-button:hover{
    background:#2563EB;
  }

  .dataTables_filter label{
    color:#A1A1AA;
    font-weight:600;
  }

  .dataTables_filter input{
    background:#06080D;
    color:#F3F4F6;
    border:1px solid #1F2937;
    border-radius:10px;
    padding:8px 10px;
    outline:none;
  }

  .dataTables_filter input:focus{
    border-color:#3B82F6;
    box-shadow:0 0 0 3px rgba(59,130,246,0.25);
  }

  .dataTables_length label{
    color:#A1A1AA;
    font-weight:600;
  }

  .dataTables_length select{
    background:#06080D;
    color:#F3F4F6;
    border:1px solid #1F2937;
    border-radius:10px;
    padding:6px 10px;
  }

  .dataTables_length select:focus{
    border-color:#3B82F6;
    box-shadow:0 0 0 3px rgba(59,130,246,0.25);
  }

  .dataTables_info{
    color:#A1A1AA;
    margin-top:10px;
  }

  .dataTables_paginate{
    margin-top:10px;
  }

  .dataTables_paginate .paginate_button{
    padding:8px 12px;
    border-radius:10px;
    border:1px solid #1F2937;
    background:#06080D;
    color:#F3F4F6;
    margin-left:6px;
  }

  .dataTables_paginate .paginate_button:hover{
    background:#111827;
    border-color:#3B82F6;
  }

  .dataTables_paginate .paginate_button.current{
    background:#3B82F6;
    color:#ffffff;
    border-color:#3B82F6;
  }

  #tbl_eventos{
    width:100%;
    font-size:13px;
    color:#F3F4F6;
    margin:0;
  }

  #tbl_eventos thead th{
    background:#06080D;
    color:#F3F4F6;
    border-bottom:1px solid #1F2937;
    padding:10px;
    white-space:nowrap;
  }

  #tbl_eventos tbody td{
    background:#111827;
    color:#F3F4F6;
    border-top:1px solid #1F2937;
    padding:10px;
    vertical-align:middle;
  }

  #tbl_eventos tbody tr:hover td{
    background:#0B1220;
  }

  #tbl_eventos .text-muted{
    color:#A1A1AA;
  }

  .btn-sm{
    padding:7px 10px;
    border-radius:10px;
    font-weight:700;
    border:none;
  }

  .btn-warning{
    background:#F59E0B;
    color:#000;
  }

  .btn-warning:hover{
    filter:brightness(0.95);
  }

  .btn-danger{
    background:#EF4444;
    color:#fff;
  }

  .btn-danger:hover{
    filter:brightness(0.95);
  }

@media (max-width: 1200px){
  .box{
    margin-left: 0;
    width: 96%;
    max-width: 100%;
  }
}


@media (max-width: 768px){
  .box{
    padding: 14px;
  }


  .table-responsive{
    overflow-x: auto;
  }
}

@media (max-width: 768px){
  .dt-buttons{
    text-align: left;
    margin-bottom: 10px;
  }

  .dt-buttons .dt-button{
    margin: 6px 6px 0 0;
  }
}

</style>


<div class="box">
  <h3 class="text-center my-2">Listado de Eventos del Calendario</h3>

  <div class="table-responsive">
    <table class="table table-bordered table-striped" id="tbl_eventos">
      <thead>
        <tr>
          <th>Título</th>
          <th>Inicio</th>
          <th>Fin</th>
          <th>Descripción</th>
          <th>Creado por</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for e in eventos %}
          <tr>
            <td>{{ e.titulo }}</td>
            <td>{{ e.inicio_fecha }} {{ e.inicio_hora|time:"h:i A"  }}</td>
            <td>
              {% if e.fin_fecha %}
                {{ e.fin_fecha }} {{ e.fin_hora|time:"h:i A"  }}
              {% else %}
                <span class="text-muted">Sin final</span>
              {% endif %}
            </td>
            <td>{{ e.descripcion|default:"-" }}</td>
            <td>{{ e.creado_por.usuario.nombre_usuario }} {{ e.creado_por.usuario.apellido_usuario }}</td>
            <td>
              <a href="/panel/calendario/editar/{{ e.id_evento }}" class="btn btn-warning btn-sm">Editar</a>
              <a href="/panel/calendario/eliminar/{{ e.id_evento }}" class="btn btn-danger btn-sm">Eliminar</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<script>
$(document).ready(function() {
  $('#tbl_eventos').DataTable({
    dom: 'Bfrtip',
    buttons: [
      { extend: 'copy', text: 'Copiar' },
      { extend: 'excel', text: 'Excel' },
      { extend: 'csv', text: 'CSV' },
      {
        extend: 'pdf',
        text: 'PDF',
        orientation: 'landscape',
        pageSize: 'A4'
      }
    ],
    language: {
      url: "//cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json",
      search: "Buscar:",
      lengthMenu: "Mostrar _MENU_ registros",
      info: "Mostrando _START_ a _END_ de _TOTAL_ registros",
      infoEmpty: "Mostrando 0 a 0 de 0 registros",
      infoFiltered: "(filtrado de _MAX_ registros totales)",
      paginate: {
        previous: "Anterior",
        next: "Siguiente"
      },
      zeroRecords: "No se encontraron resultados"
    }
  });
});
</script>

{% endblock %}
