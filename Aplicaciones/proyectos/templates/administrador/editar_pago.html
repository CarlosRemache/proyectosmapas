{% extends "plantillaadministrador.html" %}
{% load static %}
{% block contener %}
<!DOCTYPE html>
<html lang="es">
<head>

    <!-- bootstrap-fileinput -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/css/fileinput.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/js/fileinput.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-fileinput@5.5.3/js/locales/es.js"></script>

    <!-- Font Awesome (íconos) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />


<style>

  body{ background:#ffffff; }

  .box{
    width:92%;
    max-width:700px;
    margin:30px auto;
    background:#06080D;
    color:#F3F4F6;
    padding:22px;
    border-radius:18px;
    margin-left:380px;
    border:1px solid #1F2937;
  }

  h3{ text-align:center; margin-bottom:20px; }

  label{
    margin-top:12px;
    font-weight:600;
    color:#A1A1AA;
    display:block;
  }

  .form-control{
    margin-top:6px;
    background:#06080D;
    color:#F3F4F6;
    border:1px solid #1F2937;
    border-radius:10px;
    padding:10px;
  }

  .btn-save{
    margin-top:18px;
    background:#3B82F6;
    color:#fff;
    font-weight:700;
    padding:10px 18px;
    border-radius:10px;
    border:none;
    cursor:pointer;
  }

  img.preview{
    margin-top:10px;
    max-height:120px;
    border-radius:8px;
    border:1px solid #1F2937;
  }

  @media (max-width:1200px){
    .box{ margin-left:0; width:96%; }
  }

</style>

</head>
<body>

    <div class="box">
      <h3>Registrar Pago</h3>

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <label>Método de pago</label>
    <select name="metodo_pago" class="form-control">
      <option value="EFECTIVO" {% if pago.metodo_pago == "EFECTIVO" %}selected{% endif %}>EFECTIVO</option>
      <option value="TRANSFERENCIA" {% if pago.metodo_pago == "TRANSFERENCIA" %}selected{% endif %}>TRANSFERENCIA</option>
    </select>

    <label>Monto pagado</label>
    <input type="number" step="0.01"name="monto_pagado"class="form-control"value="{{ pago.monto_pagado }}">

    <label>Banco</label>
    <input type="text"name="banco"class="form-control"value="{{ pago.banco }}">

    <label>Referencia</label>
    <input type="text"name="referencia"class="form-control"value="{{ pago.referencia }}">

    <label>Estado del pago</label>
    <select name="estado_pago" class="form-control">
      <option value="CONFIRMADO" {% if pago.estado_pago == "CONFIRMADO" %}selected{% endif %}>CONFIRMADO</option>
      <option value="PENDIENTE" {% if pago.estado_pago == "PENDIENTE" %}selected{% endif %}>PENDIENTE</option>
      <option value="RECHAZADO" {% if pago.estado_pago == "RECHAZADO" %}selected{% endif %}>RECHAZADO</option>
    </select>

    <label>Comprobante actual</label>
    {% if pago.comprobante %}
      <a href="{{ pago.comprobante.url }}" target="_blank">
        <img src="{{ pago.comprobante.url }}" class="preview">
      </a>
    {% else %}
      <p>- No hay comprobante -</p>
    {% endif %}

    <label for="comprobante">Reemplazar comprobante</label>
    <input type="file" name="comprobante" id="comprobante" class="file" accept="image/*">

    <button class="btn-save" type="submit">
      Guardar Cambios
    </button>
  </form>
</div>

<script>
    $("#comprobante").fileinput({
        language: "es",
        allowedFileExtensions: ["png", "jpg", "jpeg"],
        showCaption: false,
        dropZoneEnabled: true,
        showClose: false
    });
</script>

</body>
</html>


{% endblock %}
