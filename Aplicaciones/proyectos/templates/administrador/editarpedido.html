{% extends "plantillaadministrador.html" %}
{% load static %}
{% block contener %}

<style>

  body{
    background:#ffffff;
  }

  .box{
    width:92%;
    max-width:900px;
    margin:30px auto;
    background:#06080D;
    color:#F3F4F6;
    padding:22px;
    border-radius:18px;
    margin-left:380px;
    border:1px solid #1F2937;
    box-shadow:0 12px 30px rgba(0,0,0,0.4);
  }

  .box h3{
    margin-bottom:20px;
    font-weight:700;
    text-align:center;
    color:#F3F4F6;
  }

  label{
    margin-top:12px;
    font-weight:600;
    color:#A1A1AA;
    display:block;
  }

  .form-control{
    margin-top:6px;
    margin-bottom:12px;
    background:#06080D;
    color:#F3F4F6;
    border:1px solid #1F2937;
    border-radius:10px;
    padding:10px;
    outline:none;
  }

  .form-control:focus{
    border-color:#3B82F6;
    box-shadow:0 0 0 3px rgba(59,130,246,0.25);
  }

  .acciones{
    margin-top:10px;
    display:flex;
    gap:10px;
    justify-content:flex-end;
    flex-wrap:wrap;
  }

  .btn-save{
    background:#3B82F6;
    color:#ffffff;
    font-weight:700;
    padding:10px 18px;
    border-radius:10px;
    border:none;
    cursor:pointer;
  }

  .btn-save:hover{
    background:#2563EB;
  }


  .btn-back:hover{
    background:#DC2626;
  }

  @media (max-width:1200px){
    .box{
      margin-left:0;
      width:96%;
      max-width:100%;
    }
  }

  @media (max-width:768px){
    .acciones{
      flex-direction:column;
    }
    .btn-save,
    .btn-back{
      width:100%;
      text-align:center;
    }
  }
</style>

<div class="box">

  <h3>Editar Pedido</h3>

  <form action="/procesareditarpedido/" method="POST">
      {% csrf_token %}
      <input type="hidden" name="id" value="{{ pedido.id_pedido }}">

      <label>Proveedor:</label>
      <select name="txt_proveedor" class="form-control" >
          <option value="">Sin provedor</option>
          {% for p in proveedores %}
          <option value="{{ p.id_proveedor }}"
              {% if p.id_proveedor == pedido.proveedor.id_proveedor %}selected{% endif %}>
              {{ p.nombre_proveedor }}
          </option>
          {% endfor %}
      </select>

      <label>Evento</label>
      <select name="txt_evento" class="form-control">
          <option value="">Sin evento</option>
          {% for ev in eventos %}
          <option value="{{ ev.id_evento }}"
              {% if pedido.evento and ev.id_evento == pedido.evento.id_evento %}selected{% endif %}>
              {{ ev.titulo }}
          </option>
          {% endfor %}
      </select>

      <label>Descripci√≥n del pedido:</label>
      <textarea name="txt_descripcion" class="form-control" rows="3">{{ pedido.descripcion_pedido }}</textarea>

      <label>Fecha del pedido:</label>
      <input type="date" name="txt_fecha" class="form-control" value="{{ pedido.fecha_pedido|date:'Y-m-d'  }}" required>

      <label>Estado:</label>
      <select name="txt_estado" class="form-control">
          <option value="PENDIENTE" {% if pedido.estado_pedido == "PENDIENTE" %}selected{% endif %}>PENDIENTE</option>
          <option value="EN PROCESO" {% if pedido.estado_pedido == "EN PROCESO" %}selected{% endif %}>EN PROCESO</option>
          <option value="ENTREGADO" {% if pedido.estado_pedido == "ENTREGADO" %}selected{% endif %}>ENTREGADO</option>
          <option value="CANCELADO" {% if pedido.estado_pedido == "CANCELADO" %}selected{% endif %}>CANCELADO</option>
      </select>

      <div class="acciones">
        <button class="btn-save" type="submit">Actualizar</button>
        <a href="/listadopedido/" class="btn-save">Cancelar</a>
      </div>

  </form>

</div>

{% endblock %}
